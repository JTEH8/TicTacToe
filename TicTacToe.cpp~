
#include <iostream>
#include <cstring>
using namespace std;
const bool PlayerX = true;
const bool PlayerO = false;
bool checkWin(struct board* b);
void printBoard(struct board* b);
struct board{
  char board[3][3];
  bool currentPlayer;
  bool Winning;
  int xWins;
  int oWins;
};

int main()
{
  struct board myBoard;
  bool playing = true;
  char temp[2];
  int column = 0;
  int row = 0;
  char temp2[2];
  int column2 = 0;
  int row2 = 0;
  myBoard.winning = true;
  myboard.xWins = 0;
  myBoard.oWins = 0;
  memset(myBoard.board, 0,9);
  while(playing == true){
     myBoard.currentPlayer = true;
cout << "Welcome to TicTacToe. \n There will be two players, and X will have the first move." << endl;
          cout<< "Player X please enter a valid move e.g 'a1' " << endl;	  
	  printBoard(&myBoard);
	  while(true){
	  if(myBoard.currentPlayer == true)
	    {
	      cout << "Player X, enter your move:" << endl;
	      cin.get(temp, 3, '\n');
	      cin.get();
	      cout << temp << endl;
      column = temp[1]-'0';
      cout << temp[1] << endl;
      if(('a' <= temp[0] <='c') && (1 <= column <= 3)){
 if(temp[0] == 'a'){
   row = 0;
 }
 if(temp[0] == 'b'){
   row = 1;
 }
 if(temp[0] == 'c'){
   row = 2;
 }
 cout << "This is the X: " << column << endl;
 cout << "This is the Y: " << row << endl;
      myBoard.board[column-1][row] = 'X';
      myBoard.winning = checkWin(&myBoard);
      myBoard.currentPlayer = false;
      printBoard(&myBoard);
      }
      else{
	cout << "Please enter a valid move (e.g a1, b2, c3, etc)." << endl;
      }
	    }
     if(myBoard.currentPlayer == false)
	    {
	      cout << "Player O, enter your move:" << endl;
	      cin.get(temp2, 3, '\n');
	      cin.get();
      column2 = temp2[1]-'0';
      if(('a' <= temp2[0] <='c') && (1 <= column2 <= 3)){
 if(temp2[0] == 'a'){
   row2 = 0;
 }
 if(temp[0] == 'b'){
   row2 = 1;
 }
 if(temp[0] == 'c'){
   row2 = 2;
 }
      myBoard.board[row2][column2] = 'O';
      winning = checkWin(&myBoard);
      endGame(&myBoard);
      myBoard.currentPlayer = true;
      printBoard(&myBoard);
      }
      else{
	cout << "Please enter a valid move (e.g a1, b2, c3, etc)." << endl;
      }
	    }
  }
  }
}

bool checkWin(struct board* b){
  char player = ' ';
  if(b->currentPlayer == false){
    char player = 'O';
  }
  if(b->currentPlayer == true){
    char player = 'X';
  }
 if (b->board[0][0] == player && b->board[0][1] == player && b-> board[0][2] == player){
    return true;
  }
  //diagonal from top left to bottom right
  if (b->board[0][0] == player && b->board[1][1] == player && b->board[2][2] == player){
    return true;
  }
  //middle row
  if (b->board[1][0] == player && b->board[1][1] == player && b->board[1][2] == player){
    return true;
  }
  //bottom row
  if (b->board[2][0] == player && b->board[2][1] == player && b->board[2][2] == player){
    return true;
  }
  //left column
  if (b->board[0][0] == player && b->board[1][0] == player && b->board[2][0] == player){
    return true;
  }
  // middle column
  if (b->board[0][1] == player && b->board[1][1] == player && b->board[2][1] == player){
    return true;
  }
  //right column
  if (b->board[0][2] == player && b->board[1][2] == player && b->board[2][2] == player){
    return true;
  }
  //diagonal from bottom left to top right
  if (b->board[2][0] == player && b->board[1][1] == player && b->board[0][2] == player){
    return true;
  }
  return false;
}

void printBoard(struct board* b){
cout << " 1 2 3" << endl;
	  for(int y = 0; y < 3; y++){
	    cout << (char)('a' + (char)y);
	    for(int x = 0; x < 3; x++){
	       cout << b->board[x][y];
	    }
	    cout << endl;
	  }
}

void endGame(struct board* b){
  int winCount = 0;
  if(b->winning == true){
  if(b->currentPlayer == true){
    b->xWins++;
    cout << "Player X" << " has won!" << endl;
    cout << "They have won " << xWins << " times." << endl; 
  }
  if(b->currentPlayer == false){
    playerChar = 'O';
    b->oWins++;
    cout << "Player O" << " has won!" << endl;
    cout << "They have won " << oWins << " times." << endl;
  }  
  }
}

bool playAgain(struct board* b){
  char redo[1];
  memset(redo,0 , 1);
  if(b->winning == true){
    cout << "Do you want to play again? (y or n)" << endl;
    cin.get(redo,1);
    cin.get();
    if(redo == "y"){
      return true;
    }
    if(redo == "n"){
      return false;
    }
}
